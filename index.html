<!doctype html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#000000" />
    <title>Convite DJ Party</title>

    <!-- Preload recursos clave -->
    <link rel="preload" href="assets/envelope.png" as="image" />
    <link rel="preload" href="assets/perfil3.gif" as="image" />
    <link rel="preload" href="assets/music.mp3" as="audio" />

    <link rel="stylesheet" href="styles/styles.css" />

    <!-- Favicon dinÃ¡mico -->
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŽ‰</text></svg>"
    />

    <!-- Evita que el contenido se agrande al rotar -->
    <style>
      html,
      body {
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
      }
    </style>
  </head>
  <body>
    <div id="intro-screen">
      <h2>
        Um convite especial <br />
        estÃ¡ a chegar ðŸŽ‰
      </h2>
      <img
        src="assets/envelope.png"
        alt="Clique para abrir"
        id="envelope"
        class="envelope-img"
        loading="eager"
        onclick="launchConfetti()"
      />
      <div class="click-text">ðŸ‘†<br />Clique</div>
      <div id="flash"></div>
    </div>

    <!-- Hide main content -->
    <div id="main-content" style="display: none">
      <h1>Ã‰s nosso convidado especial ðŸŽ‰</h1>
      <h2>DJ Papi faz 54 anos!</h2>
      <img
        src="assets/perfil3.gif"
        alt="DJ Party"
        class="event-img"
        loading="eager"
      />


      <div class="dateCountdown">23 de agosto 2025 desde 21h atÃ© as 04h</div>
      <div class="countdown" id="countdown"></div>

      <a
        class="button neon glow-border"
        href="https://wa.me/351935372796?text=Confirmo%20minha%20assistÃªncia%20e%20tomo%20conta%20das%20seguintes%20informaÃ§Ãµes%20que%20para%20a%20minha%20participaÃ§Ã£o,%20tenho%20de:%0A%E2%80%A2%20Ir%20vestido/a%20de%20branco.%0A%E2%80%A2%20Levar%20todas%20as%20minhas%20bebidas,%20gelo,%20copos%20e%20adega.%0A%E2%80%A2%20Levar%20as%20carnes%20temperadas%20que%20quiser%20fazer%20para%20o%20churrasco.%20"
        target="_blank"
      >
        Confirmar AssistÃªncia
      </a>
      <div class="notice">(AtÃ© 15 de agosto)</div>

      <a
        class="button"
        href="https://maps.app.goo.gl/3v67cheJxktZ16eQ9"
        target="_blank"
      >
        EndereÃ§o: Quinta do ParaÃ­so 54
      </a>

      <footer>
        Designed by
        <a href="https://www.instagram.com/rocacreatives/?hl=pt" target="_blank"
          >Roca Creatives</a
        >
      </footer>

      <div class="disco-lights" id="disco-lights"></div>
    </div>

    <audio
      id="bg-music"
      src="assets/music.mp3"
      preload="auto"
      loop
    ></audio>

    <script>
      // === Elements ===
      const envelope = document.getElementById("envelope");
      const intro = document.getElementById("intro-screen");
      const main = document.getElementById("main-content");
      const music = document.getElementById("bg-music");
      const flash = document.getElementById("flash");

      envelope.addEventListener("click", () => {
        music
          .play()
          .then(() => {
            console.log("MÃºsica iniciada");
          })
          .catch((err) => {
            console.warn("Autoplay bloqueado:", err.message);
            alert("Por favor, toca nuevamente para activar la mÃºsica.");
          });
        envelope.classList.add("open");

        flash.style.display = "block";
        flash.classList.add("flash-animate");
        setTimeout(() => {
          intro.style.display = "none";
          main.style.display = "block";
        }, 900);
      });

      const countdownElement = document.getElementById("countdown");
      const eventDate = new Date("2025-08-23T21:00:00");

      function updateCountdown() {
        const now = new Date();
        const diff = eventDate - now;

        if (diff <= 0) {
          countdownElement.innerHTML = "ðŸŽ‰ A festa comeÃ§ou!";
          return;
        }

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
        const minutes = Math.floor((diff / (1000 * 60)) % 60);
        const seconds = Math.floor((diff / 1000) % 60);

        countdownElement.innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
      }

      setInterval(updateCountdown, 1000);
      updateCountdown();
      const discoContainer = document.getElementById("disco-lights");
      const colors = ["#ffb3ff", "#b3ffff", "#ffe6b3", "#d9b3ff", "#b3ffb3"];

      function createLight() {
        const light = document.createElement("div");
        light.classList.add("light");
        light.style.left = Math.random() * 100 + "%";
        light.style.top = Math.random() * 100 + "%";
        light.style.backgroundColor =
          colors[Math.floor(Math.random() * colors.length)];
        light.style.animationDuration = 1 + Math.random() * 2 + "s";
        light.style.width = light.style.height = 8 + Math.random() * 12 + "px";
        discoContainer.appendChild(light);
        setTimeout(() => {
          if (light.parentNode) {
            discoContainer.removeChild(light);
          }
        }, 3000);
      }

      const isMobile = window.innerWidth <= 768;
      const interval = isMobile ? 500 : 300;
      setInterval(createLight, interval);

      // === Confeti animated ===
      function launchConfetti() {
        const confettiColors = [
          "#4caf50",
          "#ffeb3b",
          "#ff5722",
          "#03a9f4",
          "#e91e63",
        ];
        const confettiCount = isMobile ? 80 : 150;

        const existingContainer = document.querySelector(".confetti-container");
        if (existingContainer) {
          document.body.removeChild(existingContainer);
        }

        const confettiContainer = document.createElement("div");
        confettiContainer.className = "confetti-container";
        Object.assign(confettiContainer.style, {
          position: "fixed",
          top: "0",
          left: "0",
          width: "100%",
          height: "100%",
          pointerEvents: "none",
          zIndex: "1000",
        });
        document.body.appendChild(confettiContainer);

        for (let i = 0; i < confettiCount; i++) {
          const confetti = document.createElement("div");
          Object.assign(confetti.style, {
            position: "absolute",
            width: `${Math.random() * 8 + 4}px`,
            height: confetti.style.width,
            backgroundColor:
              confettiColors[Math.floor(Math.random() * confettiColors.length)],
            top: `${Math.random() * 100}%`,
            left: `${Math.random() * 100}%`,
            opacity: Math.random(),
            transform: `rotate(${Math.random() * 360}deg)`,
            animation: `fall ${Math.random() * 3 + 2}s ease-out forwards`,
          });
          confettiContainer.appendChild(confetti);
        }

        setTimeout(() => {
          if (confettiContainer.parentNode) {
            document.body.removeChild(confettiContainer);
          }
        }, 4000);
      }

      // === Confeti fall===
      const style = document.createElement("style");
      style.innerHTML = `
        @keyframes fall {
          0% {
            transform: translateY(-10vh) rotate(0deg);
          }
          100% {
            transform: translateY(100vh) rotate(720deg);
          }
        }
      `;
      document.head.appendChild(style);
    </script>
  </body>
</html>